# IN-APP GLOBAL INSTRUCTIONS v5.0.0 - UPGRADE GUIDE

**Created**: January 12, 2026  
**Version**: 4.3.0 ‚Üí 5.0.0 (Major Overhaul)  
**File**: `D:\SHIM\docs\IN_APP_GLOBAL_INSTRUCTIONS_v5.0.0.md`  
**Lines**: 797 (comprehensive, machine-optimized)

---

## üéØ What Changed

### Philosophy: From Human-Readable to Machine-Optimized

**OLD (v4.x)**: Prose-based instructions with markdown formatting  
**NEW (v5.0.0)**: Structured config-style with YAML/TypeScript blocks

**Why**: Claude can parse and execute structured logic more precisely than prose.

---

## üìä Key Improvements

### 1. **Machine-Parseable Format**

**Before**:
```markdown
Claude should propose automation when manual steps are repeated 3+ times.
```

**After**:
```typescript
if (manual_steps_repeated >= 3) ‚Üí propose_automation();
```

**Benefit**: Clear, executable logic. No interpretation needed.

---

### 2. **Complete SHIM Integration (¬ß6)**

**Before**: No SHIM awareness (had to be added manually)  
**After**: Full ¬ß6 section with:
- Capabilities as YAML config
- Trigger patterns as TypeScript interface
- Usage protocol as executable functions
- Workflow as structured steps
- Safety features as config
- Integration with global principles

**Benefit**: SHIM works in ALL projects out of the box.

---

### 3. **Authority Protocol as Code**

**Before**:
```markdown
If same fix repeated 3 times, Claude should stop and ask about architecture.
```

**After**:
```typescript
// TRIGGER 1: Architectural Whack-A-Mole
if (same_fix_repeated >= 3 || treating_symptoms || workarounds_piling) {
  STOP();
  OUTPUT: "üõë ARCHITECTURAL ISSUE DETECTED...";
  WAIT_FOR_CONFIRMATION();
}
```

**Benefit**: Precise trigger conditions. No ambiguity.

---

### 4. **Decision Frameworks as Functions**

**Before**: Narrative descriptions of when to do what  
**After**: Executable decision trees

```python
def resolve_implementation_block():
    search_tools(["npm", "cargo", "pip"])
    assess_complexity(time_estimate, roi)
    reframe_as_tooling_if_true()
    propose_permanent_solution()
    return real_solution_not_workaround()
```

**Benefit**: Claude can follow algorithmic logic precisely.

---

### 5. **Structured Data Hierarchy**

**Before**: Written explanation of when to use JSON vs Markdown  
**After**: YAML decision matrix

```yaml
format_hierarchy:
  1_machine_first: {formats: [JSON, YAML], use_when: [...]}
  2_hybrid: {formats: [Markdown_with_YAML], use_when: [...]}
  3_human_first: {formats: [Pure_Markdown], use_when: [...]}
```

**Benefit**: Clear format selection algorithm.

---

### 6. **Meta-Analysis Triggers as Interfaces**

**Before**: Listed as examples  
**After**: TypeScript interface with boolean flags

```typescript
interface MetaTrigger {
  repeated_manual_steps: number >= 3;
  copy_paste_code: boolean;
  complex_multi_step: boolean;
  frequent_context_switch: boolean;
  large_markdown_file: boolean;
  building_infrastructure: boolean;
}
```

**Benefit**: Programmatic trigger detection.

---

### 7. **LEAN-OUT Infrastructure Rules**

**Before**: Described in prose  
**After**: Decision matrix + examples

```yaml
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ‚îÇ Tool Exists ‚îÇ No Tool      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Generic      ‚îÇ USE TOOL ‚úÖ ‚îÇ BUILD TOOL ‚ö†Ô∏è‚îÇ
‚îÇ Domain Logic ‚îÇ WRAP TOOL ‚úÖ‚îÇ CUSTOM ‚úÖ    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Benefit**: Clear decision algorithm for infrastructure choices.

---

## üìã Section-by-Section Comparison

| Section | v4.x | v5.0.0 | Improvement |
|---------|------|--------|-------------|
| ¬ß1 Core Identity | Prose | YAML config | Machine-readable values |
| ¬ß2 Authority Protocol | Narrative | Code blocks | Executable triggers |
| ¬ß3 Structured Data | Examples | Decision matrix | Algorithm |
| ¬ß4 Sacred Principles | Prose | YAML hierarchy | Structured rules |
| ¬ß5 Documentation Sync | Narrative | TypeScript logic | Executable protocol |
| ¬ß6 SHIM Integration | ‚ùå Missing | ‚úÖ Complete | Universal availability |
| ¬ß7 Decision Frameworks | Prose | Functions | Algorithmic logic |
| ¬ß8 Meta-Analysis | Examples | Interface | Programmatic |
| ¬ß9 System Config | ‚ùå Missing | YAML config | KERNL integration |
| ¬ß10 Bootstrap | Basic | Project-aware | Smart loading |
| ¬ß11 Examples | Prose | Code diffs | Before/after |
| ¬ß12 Formatting | Narrative | YAML rules | Clear standards |
| ¬ß13 Knowledge/Search | Prose | YAML + rules | Structured behavior |
| ¬ß14 Fallback | Basic | YAML steps | Clear protocol |
| ¬ß15 Version Info | ‚ùå Missing | YAML metadata | Trackable |

---

## üöÄ How to Install

### Step 1: Open Claude Desktop Settings
1. Click Settings ‚Üí Custom Instructions
2. You'll see your current in-app global instructions

### Step 2: Backup Current Instructions (Optional)
1. Select all (Ctrl+A)
2. Copy (Ctrl+C)
3. Save to a file (just in case you want to revert)

### Step 3: Replace with v5.0.0
1. Open: `D:\SHIM\docs\IN_APP_GLOBAL_INSTRUCTIONS_v5.0.0.md`
2. Select all (Ctrl+A)
3. Copy (Ctrl+C)
4. Go back to Claude Desktop Settings
5. Select all existing instructions (Ctrl+A)
6. Paste new instructions (Ctrl+V)
7. Click Save

### Step 4: Verify in New Chat
Start a new chat and say:
```
"What version of global instructions are you using?"
```

Claude should respond with:
```
"Version 5.0.0 - Universal SHIM Integration + Machine Optimization"
```

---

## ‚úÖ What You Get Immediately

### In GREGORE Project
- ‚úÖ File-based instructions loaded (D:\GREGORE\docs\CLAUDE_INSTRUCTIONS_GLOBAL.md)
- ‚úÖ PLUS all v5.0.0 machine-optimized rules
- ‚úÖ PLUS SHIM integration
- **Result**: Best of both (file-based + universal)

### In FINEPRINT Project
- ‚úÖ v5.0.0 global instructions active
- ‚úÖ SHIM available
- ‚úÖ All authority triggers
- ‚úÖ All meta-thinking
- **Result**: Full power in any project

### In Non-Project Chats
- ‚úÖ All global principles
- ‚úÖ SHIM available (can analyze any directory)
- ‚úÖ Meta-thinking active
- **Result**: Consistent behavior everywhere

---

## üéì Key Behavioral Changes

### 1. More Precise Trigger Detection

**Before**: "Claude should probably suggest automation if..."  
**After**: `if (manual_steps_repeated >= 3) ‚Üí propose_automation();`

**Result**: More consistent automation suggestions.

---

### 2. Proactive SHIM Suggestions

**Before**: No SHIM awareness  
**After**: Triggers on "improve code", "what's messy", "refactor", etc.

**Result**: Automatic code quality maintenance.

---

### 3. LEAN-OUT Infrastructure Challenges

**Before**: Might build custom cache/queue  
**After**: STOPS and asks "Does production tool exist?" with decision matrix

**Result**: Use BullMQ/Redis instead of custom code.

---

### 4. Structured Data Proposals

**Before**: Might not suggest JSON index  
**After**: Triggers on `file_size > 1000_lines && frequently_queried`

**Result**: Automatic optimization suggestions.

---

### 5. Immediate Documentation

**Before**: "I'll remember that"  
**After**: `STOP(); UPDATE_FILE(); GIT_COMMIT(); CONFIRM();`

**Result**: Zero conversation-only decisions.

---

## üìä Coverage Comparison

### v4.x Coverage
```
‚úÖ GREGORE (via file loading)
‚ö†Ô∏è Other projects (minimal principles only)
‚ùå SHIM integration (not mentioned)
‚ö†Ô∏è Authority protocol (narrative only)
```

### v5.0.0 Coverage
```
‚úÖ GREGORE (file loading + v5.0.0 enhancements)
‚úÖ All projects (full v5.0.0 instructions)
‚úÖ SHIM integration (¬ß6 complete)
‚úÖ Authority protocol (executable triggers)
‚úÖ Machine-optimized (YAML/TypeScript logic)
‚úÖ Universal (works everywhere)
```

---

## üîß Customization

### If You Want Different Values

The machine-optimized format makes customization easy:

```yaml
# Change this:
speed_preference: "never_rush"

# To this:
speed_preference: "ship_fast"

# Or this:
technical_debt_tolerance: 0

# To this:
technical_debt_tolerance: 5  # Allow some debt
```

Just edit the YAML values in the file.

---

## üìù Maintenance

### Version Tracking
```yaml
version: "5.0.0"
updated: "January 12, 2026"
```

**When you update**: Increment version number and date.

### Adding New Sections
Format should match existing structure:
- Use YAML for config
- Use TypeScript for logic
- Use Python for algorithms
- Keep machine-parseable

---

## üéØ Summary

**What we built**: Machine-optimized universal global instructions

**Key changes**:
1. YAML/TypeScript structured format
2. Complete SHIM integration (¬ß6)
3. Executable authority triggers
4. Decision frameworks as code
5. Meta-analysis as interfaces
6. LEAN-OUT infrastructure rules
7. Universal coverage (all projects)

**Installation**: Copy-paste into Claude Desktop settings (2 minutes)

**Result**: 
- More precise Claude behavior
- SHIM available everywhere
- Consistent cross-project
- Machine-optimized execution
- Zero data loss from v4.x

**Status**: ‚úÖ Ready to install

**File**: `D:\SHIM\docs\IN_APP_GLOBAL_INSTRUCTIONS_v5.0.0.md`

---

*Version 5.0.0 - Universal SHIM Integration + Machine Optimization*  
*January 12, 2026*  
*797 lines of structured, executable global instructions*
